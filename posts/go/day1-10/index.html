<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Go Exercises(Day1-10) - I am Lizhe1228</title><meta name="author" content="Lizhe1228">
<meta name="author-link" content="">
<meta name="description" content="题目来源于 https://www.topgoer.cn/docs/gomianshiti/mianshiti" /><meta name="keywords" content='go, 面试' /><meta itemprop="name" content="Go Exercises(Day1-10)">
<meta itemprop="description" content="题目来源于 https://www.topgoer.cn/docs/gomianshiti/mianshiti"><meta itemprop="datePublished" content="2023-05-22T17:47:44+08:00" />
<meta itemprop="dateModified" content="2023-05-22T17:47:44+08:00" />
<meta itemprop="wordCount" content="13439"><meta itemprop="image" content="http://Lizhe1228.github.io/nzr.jpg"/>
<meta itemprop="keywords" content="go,面试," /><meta property="og:title" content="Go Exercises(Day1-10)" />
<meta property="og:description" content="题目来源于 https://www.topgoer.cn/docs/gomianshiti/mianshiti" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://Lizhe1228.github.io/posts/go/day1-10/" /><meta property="og:image" content="http://Lizhe1228.github.io/nzr.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-22T17:47:44+08:00" />
<meta property="article:modified_time" content="2023-05-22T17:47:44+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://Lizhe1228.github.io/nzr.jpg"/>

<meta name="twitter:title" content="Go Exercises(Day1-10)"/>
<meta name="twitter:description" content="题目来源于 https://www.topgoer.cn/docs/gomianshiti/mianshiti"/>
<meta name="application-name" content="Lizhe1228">
<meta name="apple-mobile-web-app-title" content="Lizhe1228"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/nzr-smile.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://Lizhe1228.github.io/posts/go/day1-10/" /><link rel="prev" href="http://Lizhe1228.github.io/posts/docker/docker04/" /><link rel="next" href="http://Lizhe1228.github.io/posts/git/git/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Go Exercises(Day1-10)",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/Lizhe1228.github.io\/posts\/go\/day1-10\/"
    },"genre": "posts","keywords": "go, 面试","wordcount":  13439 ,
    "url": "http:\/\/Lizhe1228.github.io\/posts\/go\/day1-10\/","datePublished": "2023-05-22T17:47:44+08:00","dateModified": "2023-05-22T17:47:44+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "Lizhe1228"
      },"description": "题目来源于 https://www.topgoer.cn/docs/gomianshiti/mianshiti"
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper" data-github-corner="right">
    <div class="header-title">
      <a href="/" title="I am Lizhe1228"><img loading="lazy" src="/nzr-smile.svg" srcset="/nzr-smile.svg, /nzr-smile.svg 1.5x, /nzr-smile.svg 2x" sizes="auto" data-title="I am Lizhe1228" data-alt="I am Lizhe1228" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span id="typeit-header-desktop" class="typeit"></span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/"
                
                
              ><i class="fa-solid fa-home fa-fw fa-sm" aria-hidden="true"></i> 首页</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/about/"
                
                
              ><i class="fa-solid fa-address-card fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/friends/"
                
                
              ><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="I am Lizhe1228"><img loading="lazy" src="/nzr-smile.svg" srcset="/nzr-smile.svg, /nzr-smile.svg 1.5x, /nzr-smile.svg 2x" sizes="auto" data-title="/nzr-smile.svg" data-alt="/nzr-smile.svg" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span id="typeit-header-title-mobile" class="typeit"></span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/"
                  
                  
                ><i class="fa-solid fa-home fa-fw fa-sm" aria-hidden="true"></i> 首页</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/about/"
                  
                  
                ><i class="fa-solid fa-address-card fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/friends/"
                  
                  
                ><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><nav aria-label="breadcrumb" class="breadcrumb-container sticky">
    <ol class="breadcrumb"><li class="breadcrumb-item"><a href="/" title="I am Lizhe1228">主页</a></li><li class="breadcrumb-item"><a href="/posts/" title="Posts">Posts</a></li><li class="breadcrumb-item active" aria-current="page">Go Exercises(Day1-10)</li>
    </ol>
  </nav><main class="container container-reverse"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom">
    </aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span title="转载" class="icon-repost"><i class="fa-solid fa-share fa-fw" aria-hidden="true"></i></span><span>Go Exercises(Day1-10)</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><img loading="lazy" src="nzr.png" srcset="/nzr.png, nzr.png 1.5x, /nzr.png 2x" sizes="auto" data-title="Lizhe1228" data-alt="Lizhe1228" width="2048" height="2048" class="avatar" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/>&nbsp;Lizhe1228</span></span>
          <span class="post-category">收录于 <a href="/categories/go%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Go每日一练</a></span></div>
      <div class="post-meta-line"><span title="发布于 2023-05-22 17:47:44"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden="true"></i><time datetime="2023-05-22">2023-05-22</time></span>&nbsp;<span title="更新于 2023-05-22 17:47:44"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden="true"></i><time datetime="2023-05-22">2023-05-22</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 13439 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 27 分钟</span>&nbsp;<span id="busuanzi_container_page_pv" class="busuanzi_visitors comment-visitors" data-flag-title="Go Exercises(Day1-10)">
            <i class="fa-regular fa-eye fa-fw me-1" aria-hidden="true"></i><span id="busuanzi_value_page_pv">-</span>&nbsp;次阅读
          </span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#day1">Day1</a></li>
    <li><a href="#day2">Day2</a></li>
    <li><a href="#day3">Day3</a>
      <ul>
        <li><a href="#1下面两段代码输出什么">1.下面两段代码输出什么？</a></li>
        <li><a href="#2下面这段代码有什么缺陷">2.下面这段代码有什么缺陷?</a></li>
        <li><a href="#font-colorred3new与make的区别font"><font color=red>3.new()与make()的区别？</font></a></li>
        <li><a href="#一些延伸">一些延伸</a></li>
      </ul>
    </li>
    <li><a href="#day4">Day4</a>
      <ul>
        <li><a href="#1下面这段代码能否通过编译不能的话原因是什么如果能输出什么">1.下面这段代码能否通过编译，不能的话原因是什么；如果能，输出什么?</a></li>
        <li><a href="#2下面这段代码能否通过编译如果可以输出什么">2.下面这段代码能否通过编译，如果可以，输出什么？</a></li>
        <li><a href="#3下面这段代码能否通过编译如果可以输出什么">3.下面这段代码能否通过编译，如果可以，输出什么？</a></li>
      </ul>
    </li>
    <li><a href="#day5">Day5</a></li>
    <li><a href="#day6">Day6</a>
      <ul>
        <li><a href="#1通过指针变量-p-访问其成员变量-name以下哪项正确">1.通过指针变量 p 访问其成员变量 name，以下哪项正确？</a></li>
        <li><a href="#2下面这段代码能否通过编译如果通过输出什么">2.下面这段代码能否通过编译？如果通过，输出什么？</a></li>
      </ul>
    </li>
    <li><a href="#day7">Day7</a>
      <ul>
        <li><a href="#1关于字符串的连接下面语法正确的是">1.关于字符串的连接，下面语法正确的是?</a></li>
        <li><a href="#2下面这段代码能否编译通过如果可以输出什么">2.下面这段代码能否编译通过？如果可以，输出什么？</a></li>
        <li><a href="#3下面赋值正确的是">3.下面赋值正确的是?</a></li>
      </ul>
    </li>
    <li><a href="#day8">Day8</a>
      <ul>
        <li>
          <ul>
            <li><a href="#1关于init函数下面说法正确的是">1.关于init函数，下面说法正确的是？</a></li>
            <li><a href="#2下面这段代码输出什么以及原因">2.下面这段代码输出什么以及原因？</a></li>
            <li><a href="#3下面这段代码能否编译通过如果可以输出什么">3.下面这段代码能否编译通过？如果可以，输出什么？</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#day9">Day9</a>
      <ul>
        <li><a href="#1关于channel下面语法正确的是">1.关于channel，下面语法正确的是？</a></li>
        <li><a href="#2下面这段代码输出什么">2.下面这段代码输出什么？</a></li>
        <li><a href="#3下面这段代码输出什么">3.下面这段代码输出什么？</a></li>
        <li><a href="#延伸">延伸</a>
          <ul>
            <li><a href="#切片传参的幻觉---传引用">切片传参的幻觉 - 传引用</a></li>
            <li><a href="#理清三个重要概念">理清三个重要概念</a>
              <ul>
                <li><a href="#传值值传递"><em>传值（值传递）</em></a></li>
                <li><a href="#传指针"><em>传指针</em></a></li>
                <li><a href="#传引用引用传递"><em>传引用（引用传递）</em></a></li>
              </ul>
            </li>
            <li><a href="#官方打假go函数传参只有值传递">官方打假：Go函数传参只有值传递</a></li>
            <li><a href="#切片参数本质还是传值">切片参数本质还是传值</a></li>
            <li><a href="#slice的结构体"><em>slice的结构体</em></a></li>
            <li><a href="#go函数传值总结"><em>Go函数传值总结</em></a></li>
            <li><a href="#切片参数修改形参一定影响实参吗">切片参数，修改形参一定影响实参吗</a>
              <ul>
                <li><a href="#切片扩容"><em>切片扩容</em></a></li>
                <li><a href="#切片容量计算"><em>切片容量计算</em></a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#day10">Day10</a>
      <ul>
        <li><a href="#1下面这段代码输出什么">1.下面这段代码输出什么？</a></li>
        <li><a href="#2下面这段代码输出什么-1">2.下面这段代码输出什么？</a></li>
        <li><a href="#3下面这段代码输出什么-1">3.下面这段代码输出什么？</a></li>
        <li><a href="#延伸go中的类型比较">延伸——go中的类型比较</a>
          <ul>
            <li><a href="#go中的类型">go中的类型</a></li>
            <li><a href="#基本类型">基本类型</a></li>
            <li><a href="#复合类型">复合类型</a>
              <ul>
                <li><a href="#数组">数组</a></li>
                <li><a href="#结构体">结构体</a></li>
              </ul>
            </li>
            <li><a href="#引用类型">引用类型</a></li>
            <li><a href="#接口类型">接口类型</a></li>
            <li><a href="#总结">总结</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content" data-end-flag="The END"><p>题目来源于 <a href="https://www.topgoer.cn/docs/gomianshiti/mianshiti"target="_blank" rel="external nofollow noopener noreferrer">https://www.topgoer.cn/docs/gomianshiti/mianshiti</a></p>
<h2 id="day1">Day1</h2>
<p>下面这段代码输出的内容是什么?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">     <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"> <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nf">defer_call</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">defer_call</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;打印前&#34;</span><span class="p">)</span> <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;打印中&#34;</span><span class="p">)</span> <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;打印后&#34;</span><span class="p">)</span> <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">panic</span><span class="p">(</span><span class="s">&#34;触发异常&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>答案：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">打印后
</span></span><span class="line"><span class="cl">打印中
</span></span><span class="line"><span class="cl">打印前
</span></span><span class="line"><span class="cl">panic: 触发异常
</span></span></code></pre></td></tr></table>
</div>
</div><p>解析：</p>
<p>defer 的执行顺序是<font color=red><em><strong>后进先出</strong></em></font>。当出现 <code>panic</code> 语句的时候，会先按照 defer 的后进先出的顺序执行，<font color=red><em><strong>最后才会执行<code>panic</code></strong></em></font>。</p>
<h2 id="day2">Day2</h2>
<p>下面这段代码输出什么，说明原因。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="nx">slice</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">     <span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="o">*</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="k">for</span> <span class="nx">key</span><span class="p">,</span><span class="nx">val</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">slice</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nx">m</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">val</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">k</span><span class="p">,</span><span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">m</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="s">&#34;-&gt;&#34;</span><span class="p">,</span><span class="o">*</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>答案：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">0 -&gt; 3
</span></span><span class="line"><span class="cl">1 -&gt; 3
</span></span><span class="line"><span class="cl">2 -&gt; 3
</span></span><span class="line"><span class="cl">3 -&gt; 3
</span></span></code></pre></td></tr></table>
</div>
</div><p>解析：</p>
<p>这是新手常会犯的错误写法，for range 循环的时候会创建每个元素的<font color=red><em><strong>副本</strong></em></font>，而不是元素的引用，所以 m[key] = &amp;val 取的都是变量 <font color=red><em><strong>val</strong></em> 的<em><strong>地址</strong></em></font>，所以最后 map 中的所有元素的值都是变量 val 的地址，因为<em><strong>最后 val 被赋值为3</strong></em>，所有输出都是3.</p>
<p>正确写法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="nx">slice</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">     <span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="o">*</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="k">for</span> <span class="nx">key</span><span class="p">,</span><span class="nx">val</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">slice</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="c1">// 创建一个临时变量value，每次range的时候这里都是一个新的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="nx">value</span> <span class="o">:=</span> <span class="nx">val</span>
</span></span><span class="line"><span class="cl">         <span class="nx">m</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">value</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">k</span><span class="p">,</span><span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">m</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="s">&#34;===&gt;&#34;</span><span class="p">,</span><span class="o">*</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="day3">Day3</h2>
<h3 id="1下面两段代码输出什么">1.下面两段代码输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// 1.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nx">s</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="nx">s</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 2.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1 : 0 0 0 0 0 1 2 3
</span></span><span class="line"><span class="cl">2 ：1 2 3 4  
</span></span></code></pre></td></tr></table>
</div>
</div><p>解析：这道题考的是使用 append 向 slice 添加元素，第一段代码常见的错误是 [1 2 3]，需要注意。</p>
<h3 id="2下面这段代码有什么缺陷">2.下面这段代码有什么缺陷?</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">funcMui</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span> <span class="kt">int</span><span class="p">)(</span><span class="nx">sum</span> <span class="kt">int</span><span class="p">,</span><span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span><span class="p">,</span><span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>缺陷：第二个返回值没有命名。</p>
<p>解析：在函数有多个返回值时，<font color=red><strong>只要有一个返回值有命名，其他的也必须命名</strong></font>。如果有多个返回值必须加上括号()；如果只有一个返回值且命名也必须加上括号()。这里的第一个返回值有命名 sum，第二个没有命名，所以错误。</p>
<h3 id="font-colorred3new与make的区别font"><font color=red>3.new()与make()的区别？</font></h3>
<p>new(T) 和 make(T,args) 是 Go 语言内建函数，用来<strong>分配内存</strong>，但<strong>适用的类型不同</strong>。</p>
<p>new(T) 会为 T 类型的新值<strong>分配</strong>已置零的内存空间，并返回<font color=red>地址（指针）</font>，即类型为 <code>*T</code>的值。换句话说就是，返回一个<strong>指针</strong>，该指针指向新分配的、类型为 T 的零值。适用于<strong>值类型</strong>，如<strong>数组、结构体</strong>等；new可被替代，能够通过字面值快速初始化。</p>
<p>make(T,args) <strong>分配并初始化</strong>，返回初始化之后的 T 类型的<font color=red>引用</font>，而并不是 T 类型的零值，也不是指针 <code>*T</code>；make() 只适用于 slice、map 和 channel；make函数会对三种类型的内部数据结构（长度、容量等）赋值。</p>
<hr>
<hr>
<h3 id="一些延伸">一些延伸</h3>
<p>引用（reference）是指可以让程序间接访问其它值的值。<font color=red>指针是引用的一种，是一类简单的透明引用，区别于不透明的引用。</font>（还没有弄懂）</p>
<p>C++ 既有指针也有引用。C++ 的引用更接近别名（alias），是受限的指针（不能读取或修改地址值，也不需要显式的解引用，所有操作都作用于指向的值）。</p>
<p>Go 的引用，则是在已经有了 直接值 和 指针 的前提下，<strong>针对特定类型的优化</strong>：为了兼顾易用性和性能，针对具体类型，在 值 和 指针 之间折中。每种引用类型，有自己独特的机制。一般是由一个结构体负责管理元数据，结构体里有一个指针，指向真正要使用的目标数据。</p>
<p>Go 的引用类型有：</p>
<ul>
<li>字符串 <code>string</code>：底层的数据结构为 <code>stringStruct</code> ，里面有一个指针指向实际存放数据的字节数组，另外还记录着字符串的长度。不过由于 <code>string</code> 是只读类型（所有看起来对 <code>string</code> 变量的修改，实际上都是生成了新的实例），在使用上常常把它当做值类型看待。由于做了特殊处理，它甚至可以作为常量。<code>string</code> 也是唯一零值不为 <code>nil</code> 的引用类型。</li>
<li>切片（slice）：底层数据结构为 <code>slice</code> 结构体 ，整体结构跟 <code>stringStruct</code> 接近，只是多了一个容量（capacity）字段。数据存放在指针指向的底层数组里。</li>
<li>映射（map）：底层数据结构为 <code>hmap</code> ，数据存放在数据桶（buckets）中，桶对应的数据结构为 <code>bmap</code> 。</li>
<li>函数（func）：底层数据结构为 <code>funcval</code> ，有一个指向真正函数的指针，指向另外的 <code>_func</code> 或者 <code>funcinl</code> 结构体（<code>funcinl</code> 代表被行内优化之后的函数）。</li>
<li>接口（interface）：底层数据结构为 <code>iface</code> 或 <code>eface</code> （专门为空接口优化的结构体），里面持有动态值和值对应的真实类型。</li>
<li>通道（chan）：底层数据结构为 <code>hchan</code>，分别持有一个数据缓冲区，一个发送者队列和一个接收者队列。</li>
</ul>
<p>如果觉得不好记忆，有一个识别引用类型的快捷办法：凡是零值是 <code>nil</code> 的，都是引用类型。指针作为特殊的透明引用，一般单独讨论。而 字符串 <code>string</code> 因为做了特殊处理，零值为 <code>&quot;&quot;</code> ，需要额外记住。除了引用类型和指针，剩下的类型都是直接值类型。</p>
<p>那些说引用类型只有需要 <code>make()</code> 的切片、映射、通道 三种的说法，是<strong>错误</strong>的！</p>
<h2 id="day4">Day4</h2>
<h3 id="1下面这段代码能否通过编译不能的话原因是什么如果能输出什么">1.下面这段代码能否通过编译，不能的话原因是什么；如果能，输出什么?</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">([]</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：不能通过编译，new([]int) 之后的 list 是一个 <code>*[]int</code> 类型的<strong>指针</strong>，<font color=red>不能对指针执行 append 操作</font>。可以使用 make() 初始化之后再用。同样的，map 和 channel 建议使用 make() 或字面量的方式初始化，不要用 new() 。</p>
<h3 id="2下面这段代码能否通过编译如果可以输出什么">2.下面这段代码能否通过编译，如果可以，输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s1</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s2</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s1</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span> <span class="nx">s2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：不能通过编译。<font color=red>append() 的第二个参数不能直接使用 slice</font>，需使用 <font color=red>… </font>操作符，将一个切片追加到另一个切片上：<strong><code>append(s1,s2…)</code></strong>。<strong>或者直接跟上元素</strong>，形如：<code>append(s1,1,2,3)</code>。</p>
<h3 id="3下面这段代码能否通过编译如果可以输出什么">3.下面这段代码能否通过编译，如果可以，输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">size</span> <span class="o">:=</span> <span class="mi">1024</span>
</span></span><span class="line"><span class="cl">    <span class="nx">max_size</span> <span class="p">=</span> <span class="nx">size</span><span class="o">*</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">size</span><span class="p">,</span> <span class="nx">max_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：不能通过编译。这道题的主要知识点是变量声明的简短模式，形如：<code>x := 100</code>。但这种声明方式有限制：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">必须使用显示初始化；
</span></span><span class="line"><span class="cl">不能提供数据类型，编译器会自动推导；
</span></span><span class="line"><span class="cl">只能在函数内部使用简短模式；
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="day5">Day5</h2>
<p>下面这段代码能否通过编译？不能的话，原因是什么？如果通过，输出什么？</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sn1</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;qq&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sn2</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;qq&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">sn1</span> <span class="o">==</span> <span class="nx">sn2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;sn1 == sn2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">sm1</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">        <span class="nx">m</span>   <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="nx">m</span><span class="p">:</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">:</span> <span class="s">&#34;1&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sm2</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">age</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">        <span class="nx">m</span>   <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="nx">m</span><span class="p">:</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">:</span> <span class="s">&#34;1&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">sm1</span> <span class="o">==</span> <span class="nx">sm2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;sm1 == sm2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：编译不通过 invalid operation: sm1 == sm2</p>
<p>这道题目考的是结构体的比较，有几个需要注意的地方：</p>
<ul>
<li>
<p>结构体<strong>只能比较是否相等</strong>，但是不能比较大小。</p>
</li>
<li>
<p><strong>相同类型的结构体才能够进行比较</strong>，结构体是否相同不但与属性类型有关，还与属性<strong>顺序</strong>相关，sn3 与 sn1 就是不同的结构体；</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">sn3</span><span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">            <span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl">        <span class="p">}{</span><span class="nx">age</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;qq&#34;</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>如果 struct 的<font color=red><strong>所有成员都可以比较</strong>，<strong>则该 struct 就可以通过 == 或 != 进行比较是否相等</strong></font>，比较时逐个项进行比较，如果每一项都相等，则两个结构体才相等，否则不相等；</p>
</li>
</ul>
<p>那什么是可比较的呢，常见的有 bool、数值型、字符、指针、数组等，像<strong>切片</strong>、<strong>map</strong>、<strong>函数</strong>等是<strong>不能比较</strong>的。 具体可以参考 Go 说明文档。https://golang.org/ref/spec#Comparison_operators</p>
<h2 id="day6">Day6</h2>
<h3 id="1通过指针变量-p-访问其成员变量-name以下哪项正确">1.通过指针变量 p 访问其成员变量 name，以下哪项正确？</h3>
<ul>
<li>A.<code>p.name</code></li>
<li>B.<code>(&amp;p).name</code></li>
<li>C.<code>(*p).name</code></li>
<li>D.<code>p-&gt;name</code></li>
</ul>
<hr>
<p>参考答案及解析：AC。&amp; 取址运算符，* 指针解引用。</p>
<h3 id="2下面这段代码能否通过编译如果通过输出什么">2.下面这段代码能否通过编译？如果通过，输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MyInt1</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MyInt2</span> <span class="p">=</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">i</span> <span class="kt">int</span> <span class="p">=</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">i1</span> <span class="nx">MyInt1</span> <span class="p">=</span> <span class="nx">i</span> 
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">i2</span> <span class="nx">MyInt2</span> <span class="p">=</span> <span class="nx">i</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i1</span><span class="p">,</span><span class="nx">i2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：编译不通过，cannot use i (type int) as type MyInt1 in assignment。</p>
<p>这道题考的是<strong>类型别名</strong>与<strong>类型定义</strong>的区别。</p>
<p>第 5 行代码<code>type MyInt1 int</code>是基于类型 int <strong>创建了新类型 MyInt1</strong>，第 6 行代码<code>type MyInt2 = int</code>是创建了 int 的<strong>类型别名 MyInt2</strong>，注意类型别名的定义时使用 <code>= </code>。所以，第 10 行代码相当于是将 int 类型的变量赋值给 MyInt1 类型的变量，Go 是强类型语言，编译当然不通过；而 MyInt2 只是 int 的别名，本质上还是 int，可以赋值。</p>
<p>第 10 行代码的赋值可以使用<font color=red><strong>强制类型转化</strong></font> <code>var i1 MyInt1 = MyInt1(i)</code></p>
<h2 id="day7">Day7</h2>
<h3 id="1关于字符串的连接下面语法正确的是">1.关于字符串的连接，下面语法正确的是?</h3>
<ul>
<li>A. str := ‘abc’ + ‘123’</li>
<li>B. str := “abc” + “123”</li>
<li>C. str := ‘123’ + “abc”</li>
<li>D. fmt.Sprintf(“abc%d”, 123)</li>
</ul>
<hr>
<p>参考答案及解析：B.<code>str := “abc” + “123”</code>，D.<code> fmt.Sprintf(“abc%d”, 123)</code>。知识点：<font color=red>字符串连接</font>。除了以上两种连接方式，还有 <code>strings.Join()</code>、<code>buffer.WriteString()</code>等。</p>
<h3 id="2下面这段代码能否编译通过如果可以输出什么">2.下面这段代码能否编译通过？如果可以，输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">     <span class="nx">x</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl">     <span class="nx">_</span>
</span></span><span class="line"><span class="cl">     <span class="nx">y</span>
</span></span><span class="line"><span class="cl">     <span class="nx">z</span> <span class="p">=</span> <span class="s">&#34;zz&#34;</span>
</span></span><span class="line"><span class="cl">     <span class="nx">k</span> 
</span></span><span class="line"><span class="cl">     <span class="nx">p</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl"> <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：编译通过，输出：<strong>0 2 zz zz 5</strong>。知识点：<strong>iota 的使用</strong>。</p>
<p><strong>iota是golang语言的常量计数器,只能在常量的表达式中使用。</strong></p>
<ol>
<li>
<p>iota在const关键字出现时将被重置为0(const内部的第一行之前)，const中每新增一行常量声明将使iota计数一次(iota可理解为const语句块中的行索引)。</p>
</li>
<li>
<p>使用iota能简化定义，在定义枚举时很有用。</p>
</li>
<li>
<p><strong>iota只能在常量的表达式中使用。</strong></p>
<p>fmt.Println(iota)编译错误： undefined: iota</p>
</li>
<li>
<p><strong>每次 const 出现时，都会让 iota 初始化为0.【自增长】</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">a</span> <span class="p">=</span> <span class="kc">iota</span> <span class="c1">// a=0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">b</span> <span class="p">=</span> <span class="kc">iota</span>          <span class="c1">//b=0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">c</span>                 <span class="c1">//c=1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">)</span><span class="o">**</span><span class="err">自定义类型</span><span class="o">**</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>自增长常量经常包含一个自定义枚举类型，允许你依靠编译器完成自增设置。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Stereotype</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl"> <span class="nx">TypicalNoob</span> <span class="nx">Stereotype</span> <span class="p">=</span> <span class="kc">iota</span> <span class="c1">// 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">TypicalHipster</span>                <span class="c1">// 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">TypicalUnixWizard</span>             <span class="c1">// 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="nx">TypicalStartupFounder</span>         <span class="c1">// 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>​      下面是来自time包的例子，它首先定义了一个Weekday命名类型，然后为      一周的每天定义了一个常量，从周日0开始，在其它编程语言中，这种类型一  	  般被称为枚举类型。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Weekday</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Sunday</span> <span class="nx">Weekday</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Monday</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Tuesday</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Wednesday</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Thursday</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Friday</span>
</span></span><span class="line"><span class="cl"> <span class="nx">Saturday</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	  周一将对应0，周一为1，如此等等。</p>
<ol start="6">
<li>
<p><strong>可跳过的值</strong></p>
<p>我们可以使用下划线跳过不想要的值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">AudioOutput</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">OutMute</span> <span class="nx">AudioOutput</span> <span class="p">=</span> <span class="kc">iota</span> <span class="c1">// 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">OutMono</span>                    <span class="c1">// 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">OutStereo</span>                  <span class="c1">// 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">_</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span>
</span></span><span class="line"><span class="cl">    <span class="nx">OutSurround</span>                <span class="c1">// 5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>位掩码表达式</strong></p>
<p><code>iota</code> 可以做更多事情，而不仅仅是 increment。更精确地说，<code>iota</code> 总是用于 increment，但是它可以用于表达式，在常量中的存储结果值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">type Allergen int
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">const (
</span></span><span class="line"><span class="cl">    IgEggs Allergen = 1 &lt;&lt; iota             // 1 &lt;&lt; 0 which is 00000001
</span></span><span class="line"><span class="cl">    IgChocolate                             // 1 &lt;&lt; 1 which is 00000010
</span></span><span class="line"><span class="cl">    IgNuts                                  // 1 &lt;&lt; 2 which is 00000100
</span></span><span class="line"><span class="cl">    IgStrawberries                          // 1 &lt;&lt; 3 which is 00001000
</span></span><span class="line"><span class="cl">    IgShellfish                             // 1 &lt;&lt; 4 which is 00010000
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个工作是因为当你在一个 const 组中仅仅有一个标示符在一行的时候，它将使用增长的 iota 取得前面的表达式并且再运用它，。在 Go 语言的 spec 中， 这就是所谓的隐性重复最后一个非空的表达式列表。</p>
<p>如果你对鸡蛋，巧克力和海鲜过敏，把这些 bits 翻转到 “on” 的位置（从左到右映射 bits）。然后你将得到一个 bit 值 00010011，它对应十进制的 19。</p>
<p>fmt.Println(IgEggs | IgChocolate | IgShellfish)</p>
<p>// output
// 19</p>
<p>我们也可以在复杂的常量表达式中使用iota，下面是来自net包的例子，用于给一个无符号整数的最低5bit的每个bit指定一个名字：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Flags</span> <span class="kt">uint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FlagUp</span> <span class="nx">Flags</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="kc">iota</span> <span class="c1">// is up
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagBroadcast</span>            <span class="c1">// supports broadcast access capability
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagLoopback</span>             <span class="c1">// is a loopback interface
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagPointToPoint</span>         <span class="c1">// belongs to a point-to-point link
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagMulticast</span>            <span class="c1">// supports multicast access capability
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>随着iota的递增，每个常量对应表达式1 &laquo; iota，是连续的2的幂，分别对应一个bit位置。使用这些常量可以用于测试、设置或清除对应的bit位的值：</p>
<p>测试结果：</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305262139658.png" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305262139658.png, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305262139658.png 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305262139658.png 2x" sizes="auto" data-title="image-20230526213947501" data-alt="image-20230526213947501" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Flags</span> <span class="kt">uint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FlagUp</span>           <span class="nx">Flags</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="kc">iota</span> <span class="c1">// is up
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagBroadcast</span>                      <span class="c1">// supports broadcast access capability
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagLoopback</span>                       <span class="c1">// is a loopback interface
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagPointToPoint</span>                   <span class="c1">// belongs to a point-to-point link
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FlagMulticast</span>                      <span class="c1">// supports multicast access capability
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">IsUp</span><span class="p">(</span><span class="nx">v</span> <span class="nx">Flags</span><span class="p">)</span> <span class="kt">bool</span>     <span class="p">{</span> <span class="k">return</span> <span class="nx">v</span><span class="o">&amp;</span><span class="nx">FlagUp</span> <span class="o">==</span> <span class="nx">FlagUp</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TurnDown</span><span class="p">(</span><span class="nx">v</span> <span class="o">*</span><span class="nx">Flags</span><span class="p">)</span>     <span class="p">{</span> <span class="o">*</span><span class="nx">v</span> <span class="o">&amp;^=</span> <span class="nx">FlagUp</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">SetBroadcast</span><span class="p">(</span><span class="nx">v</span> <span class="o">*</span><span class="nx">Flags</span><span class="p">)</span> <span class="p">{</span> <span class="o">*</span><span class="nx">v</span> <span class="o">|=</span> <span class="nx">FlagBroadcast</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">IsCast</span><span class="p">(</span><span class="nx">v</span> <span class="nx">Flags</span><span class="p">)</span> <span class="kt">bool</span>   <span class="p">{</span> <span class="k">return</span> <span class="nx">v</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">FlagBroadcast</span><span class="p">|</span><span class="nx">FlagMulticast</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">v</span> <span class="nx">Flags</span> <span class="p">=</span> <span class="nx">FlagMulticast</span> <span class="p">|</span> <span class="nx">FlagUp</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b %t\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nf">IsUp</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span> <span class="c1">// &#34;10001 true&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">TurnDown</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b %t\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nf">IsUp</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span> <span class="c1">// &#34;10000 false&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">SetBroadcast</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b %t\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nf">IsUp</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span>   <span class="c1">// &#34;10010 false&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b %t\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nf">IsCast</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span> <span class="c1">// &#34;10010 true&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 运行结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="mi">10001</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="mi">10000</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="mi">10010</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="mi">10010</span> <span class="kc">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>定义数量级</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ByteSize</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span>           <span class="p">=</span> <span class="kc">iota</span>                   <span class="c1">// ignore first value by assigning to blank identifier
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">KB</span> <span class="nx">ByteSize</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>       <span class="c1">// 1 &lt;&lt; (10*1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">MB</span>                                   <span class="c1">// 1 &lt;&lt; (10*2)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">GB</span>                                   <span class="c1">// 1 &lt;&lt; (10*3)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">TB</span>                                   <span class="c1">// 1 &lt;&lt; (10*4)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">PB</span>                                   <span class="c1">// 1 &lt;&lt; (10*5)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">EB</span>                                   <span class="c1">// 1 &lt;&lt; (10*6)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ZB</span>                                   <span class="c1">// 1 &lt;&lt; (10*7)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">YB</span>                                   <span class="c1">// 1 &lt;&lt; (10*8)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>下面是一个更复杂的例子，每个常量都是1024的幂（<font color=red>还没懂</font>）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">KiB</span> <span class="c1">// 1024
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">MiB</span> <span class="c1">// 1048576
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">GiB</span> <span class="c1">// 1073741824
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">TiB</span> <span class="c1">// 1099511627776             (exceeds 1 &lt;&lt; 32)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">PiB</span> <span class="c1">// 1125899906842624
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">EiB</span> <span class="c1">// 1152921504606846976
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ZiB</span> <span class="c1">// 1180591620717411303424    (exceeds 1 &lt;&lt; 64)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">YiB</span> <span class="c1">// 1208925819614629174706176
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>不过iota常量生成规则也有其局限性。例如，它并不能用于产生1000的幂（KB、MB等），因为Go语言并没有计算幂的运算符。</p>
</li>
<li>
<p><strong>定义在一行的情况</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Apple</span><span class="p">,</span> <span class="nx">Banana</span> <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">iota</span> <span class="o">+</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Cherimoya</span><span class="p">,</span> <span class="nx">Durian</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Elderberry</span><span class="p">,</span> <span class="nx">Fig</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// iota 在下一行增长，而不是立即取得它的引用。(没懂)
</span></span></span><span class="line"><span class="cl"><span class="c1">// Apple: 1
</span></span></span><span class="line"><span class="cl"><span class="c1">// Banana: 2
</span></span></span><span class="line"><span class="cl"><span class="c1">// Cherimoya: 2
</span></span></span><span class="line"><span class="cl"><span class="c1">// Durian: 3
</span></span></span><span class="line"><span class="cl"><span class="c1">// Elderberry: 3
</span></span></span><span class="line"><span class="cl"><span class="c1">// Fig: 4
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>中间插队</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">i</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl">    <span class="nx">j</span> <span class="p">=</span> <span class="mf">3.14</span>
</span></span><span class="line"><span class="cl">    <span class="nx">k</span> <span class="p">=</span> <span class="kc">iota</span>
</span></span><span class="line"><span class="cl">    <span class="nx">l</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// i=0,j=3.14,k=2,l=3
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="3下面赋值正确的是">3.下面赋值正确的是?</h3>
<ul>
<li>A. var x = nil</li>
<li>B. var x interface{} = nil</li>
<li>C. var x string = nil</li>
<li>D. var x error = nil</li>
</ul>
<hr>
<p>参考答案及解析：<strong>BD</strong>。知识点：<strong>nil 值</strong>。<font color=red>nil 只能赋值给指针、chan、func、interface、map 或 slice 类型的变量</font>。强调下 D 选项的 error 类型，它是一种内置接口类型，看下方贴出的源码就知道，所以 D 是对的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="kt">error</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Error</span><span class="p">()</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="day8">Day8</h2>
<h4 id="1关于init函数下面说法正确的是">1.关于init函数，下面说法正确的是？</h4>
<ul>
<li>A. 一个包中，可以包含多个 init 函数；</li>
<li>B. 程序编译时，先执行依赖包的 init 函数，再执行 main 包内的 init 函数；</li>
<li>C. main 包中，不能有 init 函数；</li>
<li>D. init 函数可以被其他函数调用；</li>
</ul>
<hr>
<p>参考答案及解析：<strong>AB</strong>。关于 init() 函数有几个需要注意的地方：</p>
<ul>
<li>
<p>init() 函数是用于程序执行前做包的<strong>初始化</strong>的函数，比如初始化包里的变量等;</p>
</li>
<li>
<p>一个包可以出现<strong>多个</strong> init() 函数，一个源文件也可以包含多个 init() 函数；</p>
</li>
<li>
<p><strong>同一个包中多个 init() 函数的执行顺序没有明确定义，但是不同包的init函数是根据包导入的依赖关系决定的</strong>（看下图）;</p>
</li>
<li>
<p>init() 函数在代码中<strong>不能被显示调用、不能被引用</strong>（赋值给函数变量），否则出现编译错误;</p>
</li>
<li>
<p>一个包被引用多次，如 A import B,C import B,A import C，<strong>B 被引用多次，但 B 包只会初始化一次</strong>；</p>
</li>
<li>
<p>引入包，<strong>不可出现死循坏</strong>。即 A import B,B import A，这种情况编译失败；</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305271057480.jpeg" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305271057480.jpeg, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305271057480.jpeg 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305271057480.jpeg 2x" sizes="auto" data-title="img" data-alt="img" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
</li>
</ul>
<h4 id="2下面这段代码输出什么以及原因">2.下面这段代码输出什么以及原因？</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">hello</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">     <span class="nx">h</span> <span class="o">:=</span> <span class="nx">hello</span>
</span></span><span class="line"><span class="cl">     <span class="k">if</span> <span class="nx">h</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;nil&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;not nil&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>A. nil</li>
<li>B. not nil</li>
<li>C. compilation error</li>
</ul>
<hr>
<p>答案及解析：<strong>B</strong>。这道题目里面，是将 hello() （应该是hello吧）赋值给变量 h，而不是函数的返回值，所以输出 not nil。<font color=red>没懂，敲代码看一看</font></p>
<h4 id="3下面这段代码能否编译通过如果可以输出什么">3.下面这段代码能否编译通过？如果可以，输出什么？</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">GetValue</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nx">i</span> <span class="o">:=</span> <span class="nf">GetValue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">     <span class="k">switch</span> <span class="nx">i</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">case</span> <span class="kt">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">         <span class="nb">println</span><span class="p">(</span><span class="s">&#34;int&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">println</span><span class="p">(</span><span class="s">&#34;string&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="k">case</span> <span class="kd">interface</span><span class="p">{}:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">println</span><span class="p">(</span><span class="s">&#34;interface&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">println</span><span class="p">(</span><span class="s">&#34;unknown&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>参考答案及解析：<strong>编译失败</strong>。考点：类型选择，类型选择的语法形如：i.(type)，其中 <strong>i 是接口</strong>，<strong>type 是固定关键字</strong>，需要注意的是，<font color=red>只有接口类型才可以使用类型选择</font>。看下关于接口的文章。</p>
<h2 id="day9">Day9</h2>
<h3 id="1关于channel下面语法正确的是">1.关于channel，下面语法正确的是？</h3>
<ul>
<li>A. var ch chan int</li>
<li>B. ch := make(chan int)</li>
<li>C. &lt;- ch</li>
<li>D. ch &lt;-</li>
</ul>
<hr>
<p>参考答案及解析：ABC。A、B都是声明 channel；C 读取 channel；<strong>写 channel 是必须带上值</strong>，所以 D 错误。</p>
<h3 id="2下面这段代码输出什么">2.下面这段代码输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">m</span> <span class="kd">map</span><span class="p">[</span><span class="nx">person</span><span class="p">]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">p</span> <span class="o">:=</span> <span class="nx">person</span><span class="p">{</span><span class="s">&#34;mike&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">[</span><span class="nx">p</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>A.0</li>
<li>B.1</li>
<li>C.Compilation error</li>
</ul>
<hr>
<p>参考答案及解析：A。<strong>打印一个 map 中不存在的值时，返回元素类型的零值</strong>。这个例子中，m 的类型是 map[person]int，因为 m 中不存在 p，所以打印 int 类型的零值，即 0。</p>
<h3 id="3下面这段代码输出什么">3.下面这段代码输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">hello</span><span class="p">(</span><span class="nx">num</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">i</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">hello</span><span class="p">(</span><span class="nx">i</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>A.18</li>
<li>B.5</li>
<li>C.Compilation error</li>
</ul>
<hr>
<p>参考答案及解析：18。知识点：<strong>可变参数</strong>。</p>
<p>形如<code>...type</code>格式的类型只能作为函数的参数类型存在，并且必须是最后一个参数，它是一个语法糖（syntactic sugar），即这种语法对语言的功能并没有影响，但是更方便程序员使用，通常来说，使用语法糖能够增加程序的可读性，从而减少程序出错的可能。</p>
<p>从内部实现机理上来说，类型<code>...type</code>本质上是一个数组切片，也就是<code>[]type</code>。</p>
<p>做这道题时思考的一个问题，为什么看起来切片作为参数传进去的时候不是值传递呢？正如下面的情况，当我们要修改一个数的值的时候，需要传入指针，而修改切片的时候直接将切片作为参数就可以直接对切片进行修改。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">i</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nf">changeSlice</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">num</span> <span class="o">:=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="nf">changeInt</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">num</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">num</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">18</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">changeInt</span><span class="p">(</span><span class="nx">a</span> <span class="o">*</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">a</span> <span class="p">=</span> <span class="mi">250</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 输出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="mi">18</span>
</span></span><span class="line"><span class="cl"><span class="mi">250</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="延伸">延伸</h3>
<p>切片作为函数参数是传值还是传引用？</p>
<p>学习链接：https://juejin.cn/post/6888117219213967368</p>
<h4 id="切片传参的幻觉---传引用">切片传参的幻觉 - 传引用</h4>
<p>golang中函数的参数为切片时是传引用还是传值？对于这个问题，当你百度一轮过后，你会发现很大一部分人认为是传引用，通常他们会贴出下面这段代码进行佐证：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">pacakge</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">111</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">slice</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;slice: %v \n&#34;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;slice: %v\n&#34;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码中，在main函数里边初始化一个切片变量slice，接着调用changeSlice函数，参数为切片变量slice。而函数changeSlice的主要处理逻辑是改变切片的第二个元素的值。下面我们看一下运行打印的结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">slice</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> 
</span></span><span class="line"><span class="cl"><span class="nx">slice</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">111</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>从输出结果我们看到，函数changeSlice内对切片的修改，main函数中的切片变量slice也跟着修改了。咋一看，这不就是引用传递的表现吗？</p>
<p>但事实上真的传引用吗？</p>
<h4 id="理清三个重要概念">理清三个重要概念</h4>
<p>在探讨函数切片参数到底是以哪种方式传递时，我们先来理清下面三个重要的概念：</p>
<ul>
<li>传值（值传递）</li>
<li>传指针</li>
<li>传引用（引用传递）</li>
</ul>
<h5 id="传值值传递"><em>传值（值传递）</em></h5>
<p>是指在调用函数时将实际参数拷贝一份传递到函数中，这样在函数中对参数进行修改不会影响到实际参数。这个简单不必赘述。</p>
<h5 id="传指针"><em>传指针</em></h5>
<p>形参是指向实参地址的指针，当对形参的指向进行操作时，就相当于对实参本身进行操作。听起来比较绕是吧，我们来看个例子就知道了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pa</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">a</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;value: %p\n&#34;</span><span class="p">,</span> <span class="nx">pa</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;addr: %p\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">pa</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">modify</span><span class="p">(</span><span class="nx">pa</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;a 的值被修改了，新值为:&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">modify</span><span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;函数内的 value: %p\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;函数内的 addr: %p\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="nx">p</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码中定义了一个变量 a，并把地址保存在指针变量pa里面；接着打印pa的值和pa的地址，然后调用modify函数，参数为指针变量pa；modify函数中首先打印形参p的值和p的地址，接着修改p的值为1。</p>
<p>我们打印输出的结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">value</span><span class="p">:</span> <span class="mh">0xc000016088</span>
</span></span><span class="line"><span class="cl"><span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc00000e028</span>
</span></span><span class="line"><span class="cl"><span class="err">函数内的</span> <span class="nx">value</span><span class="p">:</span> <span class="mh">0xc000016088</span>
</span></span><span class="line"><span class="cl"><span class="err">函数内的</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc00000e038</span>
</span></span><span class="line"><span class="cl"><span class="nx">a</span> <span class="err">的值被修改了，新值为</span><span class="p">:</span> <span class="mi">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>从输出结果中我们可以看到，<em>这是一个指针的拷贝</em>。指针pa 和 p 的值虽然相同，但是存放这两个指针的内存地址是不同的，因此这是两个不同的指针。</p>
<p><em>注意：任何存放在内存里的东西都有自己的地址，指针也不例外，它虽然指向别的数据，但是也有存放该指针的内存</em>。</p>
<p>结合图来看相信会更清晰一点：</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281105794.webp" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281105794.webp, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281105794.webp 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281105794.webp 2x" sizes="auto" data-title="img" data-alt="img" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h5 id="传引用引用传递"><em>传引用（引用传递）</em></h5>
<p>是指在调用函数时将实际参数的地址传递到函数中，在函数中对参数所进行的修改，将影响实际参数。</p>
<p>假设以上面demo为例子，如果在modify函数中打印指针变量p的地址也是0xc00000e028，那么我们就认为是引用传递</p>
<p>但这里我们不能用go来举例子，原因请接着往下看。</p>
<h4 id="官方打假go函数传参只有值传递">官方打假：Go函数传参只有值传递</h4>
<p>看完<em>传值、传指针、传引用</em>的概念后，如果你坚持认为是传引用，好，大叔要在这里直接把你击垮。</p>
<p>根据Go官方文档声明：<em>Go里面函数传参只有值传递一种方式</em>。也就是说，在Go中，函数的传参只有传值一种方式。<a href="https://link.juejin.cn?target=https%3A%2F%2Fgolang.org%2Fref%2Fspec%23Calls"target="_blank" rel="external nofollow noopener noreferrer">官方文档传送门</a></p>
<p>如果你还不服气，咱们直接看例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;func: %p \n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">111</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">slice</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;slice: %v slice addr %p \n&#34;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;slice: %v slice addr %p \n&#34;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>打印输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">slice</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> <span class="nx">slice</span> <span class="nx">addr</span> <span class="mh">0xc0000a6020</span> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="p">:</span> <span class="mh">0xc0000a6060</span> 
</span></span><span class="line"><span class="cl"><span class="nx">slice</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">111</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> <span class="nx">slice</span> <span class="nx">addr</span> <span class="mh">0xc0000a6020</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果函数切片参数传的是引用，那么上面这个例子中，main函数中打印的切片slice的地址应该和changSlice函数中打印切片的地址一样的，但从输出结果来看并不是这样的。</p>
<p>因此在这里，我们可以非常肯定地说：<em>有关Go函数中切片参数是传引用的说法是错误的，另外有关有关引用传递是针对slice、map、channel三种数据类型地说法也是错误的</em>。</p>
<h4 id="切片参数本质还是传值">切片参数本质还是传值</h4>
<p>从上面的分析来看，切片参数传递的方式并非是传引用。反而极有可能是传指针，而在传指针那小节的分析中我们可以知道，传指针其实就是指针的拷贝，形参和实参是两个不同的指针，但是它们的值是一样的。本质上可以说还是传值。</p>
<p>那到底是不是这样的呢？大叔疑问句都出来了，说明90%是有可能的，接下我们就验证一下那剩下的10%。</p>
<h4 id="slice的结构体"><em>slice的结构体</em></h4>
<p>我们先来看一下切片的结构体是长啥样的：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">slice</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">array</span> <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span>
</span></span><span class="line"><span class="cl">    <span class="nx">len</span>   <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cap</span>   <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Pointer</span> <span class="o">*</span><span class="nx">ArbitraryType</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>切片，顾名思义就是数组切下来的一部分，其结构体包含了三部分，第一部分是指向底层数组的指针，其次是切片的大小len和切片的容量cap。（果然含有指针成员变量。）</p>
<p>上面的结构体看着有点变扭，不够直观，我们造个例子：一个数组 arr := [5]int{0,1,2,3,4}，生成一个切片 slice := arr[1:4]，最终得到的切片如下：</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281107606.webp" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281107606.webp, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281107606.webp 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281107606.webp 2x" sizes="auto" data-title="img" data-alt="img" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>再看个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">arr</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">slice1</span> <span class="o">:=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nx">slice2</span> <span class="o">:=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 打印一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;arr %v, slice1 %v, slice2 %v   arr addr: %p, slice1 addr: %p, slice2 addr: %p\n&#34;</span><span class="p">,</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">slice1</span><span class="p">,</span> <span class="nx">slice2</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">arr</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">slice1</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">slice2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 打印二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;arr[2] addr: %p, slice1[1] addr: %p, slice2[0] addr: %p\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="o">&amp;</span><span class="nx">slice1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">&amp;</span><span class="nx">slice2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">=</span> <span class="mi">2222</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// 打印三
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;arr: %v, slice1: %v, slice2: %v\n&#34;</span><span class="p">,</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">slice1</span><span class="p">,</span> <span class="nx">slice2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">slice1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">1111</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// 打印四
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;arr: %v, slice1: %v, slice2: %v\n&#34;</span><span class="p">,</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">slice1</span><span class="p">,</span> <span class="nx">slice2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码中我们创建一个数组，并生成两个切片。打印它们的值和对应的地址。另外，修改数组或者切片的某个单元的值，观察数组和切片中单元的值的变化：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">arr</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">],</span> <span class="nx">slice1</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">],</span> <span class="nx">slice2</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>   <span class="nx">arr</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc000014090</span><span class="p">,</span> <span class="nx">slice1</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc00000c080</span><span class="p">,</span> <span class="nx">slice2</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc00000c0a0</span>
</span></span><span class="line"><span class="cl"><span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc0000140a0</span><span class="p">,</span> <span class="nx">slice1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc0000140a0</span><span class="p">,</span> <span class="nx">slice2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc0000140a0</span>
</span></span><span class="line"><span class="cl"><span class="nx">arr</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2222</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">],</span> <span class="nx">slice1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2222</span> <span class="mi">3</span><span class="p">],</span> <span class="nx">slice2</span><span class="p">:</span> <span class="p">[</span><span class="mi">2222</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">arr</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">1111</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">],</span> <span class="nx">slice1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">1111</span> <span class="mi">3</span><span class="p">],</span> <span class="nx">slice2</span><span class="p">:</span> <span class="p">[</span><span class="mi">1111</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>从打印一结果可以看出：创建的两个切片，它们各自拥有不同的地址</li>
<li>从打印二结果可以看出：切片元素slice1[1]、slice2[0] 与数组元素arr[2]有着同样的地址，说明这些<em>切片共享着数组arr中的数据</em></li>
<li>打印三和打印四可以看出：修改数组和切片共同部分的数据，对两者都有直接影响，再次印证第二点的结论。</li>
</ul>
<p>从上面的分析中我们可以知道，两个不同的切片之所以能相互影响，主要因素是切片内部的指针指向同一个数据源，且两个切片的指针指向的数据源中有交集。</p>
<p>再回到切片作为函数参数的问题上，因为<em>Go里面函数传参只有值传递一种方式</em>，所以当切片作为参数时，其实也是切片的拷贝，但是在拷贝的切片中，其包含的指针成员变量的值是一样的，也就是说它们指向的数据源是一样，因此在调用函数内修改形参能影响实参。</p>
<h4 id="go函数传值总结"><em>Go函数传值总结</em></h4>
<p>通常，我们把在传值拷贝过程中，修改形参能直接修改实参的数据类型称为<em>引用类型</em>。</p>
<p>于是我们又可以这样总结：</p>
<p><em>Go语言中所有的传参都是值传递（传值），都是一个副本，一个拷贝。因为拷贝的内容有时候是非引用类型（int、string、struct等这些），这样就在函数中就无法修改原内容数据；有的是引用类型（指针、map、slice、chan等这些），这样就可以修改原内容数据。</em></p>
<p>这里要注意的是：<em>引用类型和传引用是两个概念</em>。</p>
<h4 id="切片参数修改形参一定影响实参吗">切片参数，修改形参一定影响实参吗</h4>
<p>是的，看到这里，我们应该问自己一个问题：函数的切片参数，在函数内修改形参一定会影响外部的实参吗？（疑问句一出必然有鬼！）</p>
<p>我们来看个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">slice</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">slice</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">slice</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">i</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;slice: %v, addr: %p \n&#34;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">,</span> <span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;slice: %v, addr: %p \n&#34;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">,</span> <span class="nx">slice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">changeSlice</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">int</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">111</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;func s: %v, addr: %p \n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面代码中，先是创建好一个长度为2，容量为3的空切片，然后给切片赋两个值，接着调用函数changeSlice，参数为赋完值的切片。函数changeSlice里面先是往切片中追加两个元素，然后再改变切片的第二个元素的值。</p>
<p>我们来看看打印结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">slice</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc00001a100</span> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nx">s</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">111</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">],</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc000014090</span> 
</span></span><span class="line"><span class="cl"><span class="nx">slice</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">addr</span><span class="p">:</span> <span class="mh">0xc00001a100</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>从输出结果我们可以看到，函数内修改形参s后，外部的实参slice并没有跟着改变，而且注意到一点是，形参s和实参slice的指针成员变量的值是不一样的，也就是说它们指向的数据源不是同一个了。</p>
<p>这又是为什么呢？</p>
<h5 id="切片扩容"><em>切片扩容</em></h5>
<p>首先我们来了解一个知识点：</p>
<p><em>无论数组还是切片，都有长度限制。也就是追加切片的时候，如果元素正好在切片的容量范围内，直接在尾部追加一个元素即可。如果超出了最大容量，再追加元素就需要针对底层的数组进行复制和扩容操作了</em>。</p>
<p>也就是说：</p>
<ul>
<li>使用append方法给slice追加元素的时候，由于slice的容量还未满，因此等同于扩展了slice指向数组的内容，可以理解为重新切了一个数组内容附给slice，同时修改了数组的内容。</li>
<li>使用append方法给slice追加元素的时候，如果此时slice的容量已满，再进行追加时，超出了切片的容量，数组就会越界了，于是就会出现扩容操作</li>
</ul>
<p>当需要扩容时，append会做哪些操作呢？</p>
<ol>
<li>创建一个新的临时切片t，t的长度和slice切片的长度一样，但是t的容量是slice切片的2倍，新建切片的时候，底层也创建了一个匿名的数组，数组的长度和切片容量一样。（实际上不一定是两倍扩容，详情可参考文章<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzIyMTg2OTQ5NA%3D%3D%26mid%3D2247484589%26idx%3D1%26sn%3D7f98cdd463f52ef0bee309400ff5be61%26chksm%3De8376074df40e962eec9f9dad4c80f0d1c47f341344d0696d0f2d466aba61394c515fde8723b%26token%3D449529257%26lang%3Dzh_CN%23rd"target="_blank" rel="external nofollow noopener noreferrer"> Golang 中关于slice扩容策略</a>）</li>
<li>复制slice里面的元素到t里，即填入匿名数组中。然后把t赋值给slice，现在slice的指向了底层的匿名数组。</li>
<li>转变成小于容量的append方法。</li>
</ol>
<p>举个例子，数组arr = [3]int{0, 11, 22}，生成一个切片slice := arr[1:3]，使用append方法往切片slice中追加元素33，将发生以下操作：</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281108689.webp" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281108689.webp, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281108689.webp 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281108689.webp 2x" sizes="auto" data-title="img" data-alt="img" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>再回到刚刚举的例子，之所外部的实参切片变量slice不受形参切片变量s修改的影响，因为在执行完 <em>s = append(s, 4)</em> 这段代码后，切片s的指针指向的数组发生了扩容，其指针指向了新的数组，因此当再次修改其第二个元素的值时，是不会影响外部切片变量slice的。</p>
<h5 id="切片容量计算"><em>切片容量计算</em></h5>
<p>具体的切片容量计算可参考下面的例子：</p>
<p>数组 [0, 1, 2, 3, 4] 中，数组有5个元素。如果切片 s = [1, 2, 3]，那么3在数组的索引为3，也就是数组还剩最后一个元素的大小，加上s已经有3个元素，因此最后s的容量为 1 + 3 = 4。如果切片是 s1 = [4]，4的索引在数组中是最大的了，数组空余的元素为0，那么s1的容量为 0 + 1 = 1。具体如下表：</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281109878.webp" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281109878.webp, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281109878.webp 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305281109878.webp 2x" sizes="auto" data-title="img" data-alt="img" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h2 id="day10">Day10</h2>
<h3 id="1下面这段代码输出什么">1.下面这段代码输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="o">:=</span> <span class="mf">8.1</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>A.13.1</li>
<li>B.13</li>
<li>C.compilation erro</li>
</ul>
<hr>
<p>参考答案及解析：C。a 的类型是 int，b 的类型是 float，<strong>两个不同类型的数值不能相加</strong>，编译报错。</p>
<h3 id="2下面这段代码输出什么-1">2.下面这段代码输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>  
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">t</span> <span class="o">:=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>A.3</li>
<li>B.4</li>
<li>C.compilation error</li>
</ul>
<hr>
<p>参考答案及解析：B。知识点**：操作符 [i,j]**。基于数组（切片）可以使用操作符 [i,j] 创建新的切片，从索引 i，到索引 j 结束，截取已有数组（切片）的任意部分，返回新的切片，新切片的值包含原数组（切片）的 i 索引的值，但是不包含 j 索引的值。<font color=red>左闭右开呗</font>。i、j 都是可选的，<strong>i 如果省略，默认是 0，j 如果省略，默认是原数组（切片）的长度</strong>。i、j 都不能超过这个长度值。</p>
<p><strong>假如底层数组的大小为 k，截取之后获得的切片的长度和容量的计算方法：长度：<code>j-i</code>，容量：<code>k-i</code>。</strong></p>
<p><strong>截取操作符还可以有第三个参数</strong>，形如 <code>[i,j,k]</code>，<strong>第三个参数 k 用来限制新切片的容量</strong>，但不能超过原数组（切片）的底层数组大小。截取获得的切片的长度和容量分别是：<code>j-i</code>、<code>k-i</code>。</p>
<p>所以例子中，切片 t 为 [4]，长度和容量都是 1。</p>
<h3 id="3下面这段代码输出什么-1">3.下面这段代码输出什么？</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;equal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;not equal&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>A. compilation error</li>
<li>B. equal</li>
<li>C. not equal</li>
</ul>
<hr>
<p>参考答案及解析：<strong>A</strong>。<strong>Go 中的数组是值类型</strong>，可比较，另外一方面，<strong>数组的长度也是数组类型的组成部分</strong>，所以 <strong>a 和 b 是不同的类型</strong>，是<strong>不能比较</strong>的，所以编译错误。</p>
<h3 id="延伸go中的类型比较">延伸——go中的类型比较</h3>
<p><a href="https://segmentfault.com/a/1190000039005467"target="_blank" rel="external nofollow noopener noreferrer">https://segmentfault.com/a/1190000039005467</a></p>
<h4 id="go中的类型">go中的类型</h4>
<p>首先来看看go包含的最基础的集中类型</p>
<ul>
<li>基本类型：go中最基本类型包括整型（<code>int、uint、int8、uint8、int16、uint16、int32、uint32、int64、uint64、byte、rune</code>等）、浮点型（<code>float32、float64</code>）、字符串（<code>string</code>也是个[]rune数组）和比较不常用的复数类型（<code>complex64/complex128</code>）。</li>
<li>复合类型：主要包括<code>结构体</code>和<code>数组</code>。</li>
<li>引用类型：<code>Slice、Map、Channel、指针</code>。</li>
<li>接口类型：<code>Error、io.Reader等</code>。</li>
</ul>
<p>go作为强类型语言并不会和PHP等高级语言自动帮我们进行类型转换，所以我们在比较时必须用<code>==</code>两边的类型必须一致，即使他们底部类型一致也不行。看下面的代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Id</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">B</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Id</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">a</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">b</span> <span class="kt">int16</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 编译报错：invalid operation a == b (mismatched types int and int16)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">aStruct</span> <span class="o">:=</span> <span class="nx">A</span><span class="p">{</span><span class="nx">Id</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bStruct</span> <span class="o">:=</span> <span class="nx">B</span><span class="p">{</span><span class="nx">Id</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 编译报错：invalid operation: aStruct == bStruct (mismatched types A and B)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">aStruct</span> <span class="o">==</span> <span class="nx">bStruct</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：在上述例子中，一个类型是A，一个类型是B，所以无法比较。再看下面的例子。</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408952.png" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408952.png, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408952.png 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408952.png 2x" sizes="auto" data-title="image-20230529140838840" data-alt="image-20230529140838840" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408778.png" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408778.png, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408778.png 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291408778.png 2x" sizes="auto" data-title="image-20230529140842706" data-alt="image-20230529140842706" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sn1</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl">		<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;qq&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sn2</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl">		<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;qq&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">sn1</span> <span class="o">==</span> <span class="nx">sn2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;sn1 == sn2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个例子中，sn1和sn2是匿名结构体，里面的属性顺序相同，可以比较。</p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410323.png" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410323.png, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410323.png 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410323.png 2x" sizes="auto" data-title="image-20230529141015259" data-alt="image-20230529141015259" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p><img loading="lazy" src="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410573.png" srcset="https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410573.png, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410573.png 1.5x, https://lizhe1228-img-1301547619.cos.ap-beijing.myqcloud.com/img/202305291410573.png 2x" sizes="auto" data-title="image-20230529141007497" data-alt="image-20230529141007497" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h4 id="基本类型">基本类型</h4>
<p>go的基本类型就比较简单，只要类型是一样的，那么他们就是可以比较的，举个栗子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">a</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">b</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 输出false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="复合类型">复合类型</h4>
<h5 id="数组">数组</h5>
<p>面试中也经常会问到go数组和切片的区别。数组在go中是必须先确定长度的，也就是长度不能再去扩容。并且它是个值拷贝，做参数传到一个函数中被修改，那么外部的值还是一样的不变的。Slice则相反。那么数组是否可以比较呢，看下面的例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">d</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">c</span><span class="p">)</span> <span class="c1">// false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">d</span><span class="p">)</span> <span class="c1">// invalid operation: a == d (mismatched types [2]int and [3]int)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以看出，<code>相同长度的数组是可以比较的，而不同长度的数组是不能进行比较的</code>。原因是什么呢？这是因为数组类型中,数组的长度也是类型的一部分，不同长度的数组那么他们的类型也就被认为不同的，所以无法比较。</p>
<h5 id="结构体">结构体</h5>
<p>同样的<code>Struct</code>也是一样的。<code>Struct</code>的比较也从内部类型开始比较，每一类型的值相等才是相等的。如下例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="nx">A</span><span class="p">{</span><span class="nx">id</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;123&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="o">:=</span> <span class="nx">A</span><span class="p">{</span><span class="nx">id</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;123&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span> <span class="o">:=</span> <span class="nx">A</span><span class="p">{</span><span class="nx">id</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;1234&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">c</span><span class="p">)</span> <span class="c1">// false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>那么可以理解成<code>Struct</code>结构体是可以比较的吗。我们再来看个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">son</span> <span class="p">[]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="nx">A</span><span class="p">{</span><span class="nx">id</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;123&#34;</span><span class="p">,</span><span class="nx">son</span><span class="p">:[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="o">:=</span> <span class="nx">A</span><span class="p">{</span><span class="nx">id</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;123&#34;</span><span class="p">,</span><span class="nx">son</span><span class="p">:[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// invalid operation: a == b (struct containing []int cannot be compared)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>怎么又变成不可比较的呢？这就要看下面的引用类型了。</p>
<h4 id="引用类型">引用类型</h4>
<p>上面中的例子结构体中带上切片就无法比较了，在go中<code>Slice</code>和<code>Map</code>被定义成不能比较的类型。我们来看</p>
<p>如果<code>Slice</code>是可比较，那么用什么来定义是一样的切片呢？如果用地址，那么如果两个地址指向的<code>Slice</code>是一样的呢？这显然不合适。如果和数组一样的方式，那么我切片扩容了呢，就不相等了。所以长度和容量导致不好比较。虽然可以在语言层面解决这个问题，但是 golang 团队认为不值得为此耗费精力。所以<code>Slice</code>被当成不可比较。
同样的<code>Map</code>也被定义成不可比较类型。那么引用类型都是不可比较吗?也不是，看个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span> <span class="p">:</span> <span class="s">&#34;test1&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span> <span class="p">:</span> <span class="s">&#34;test1&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span> <span class="o">:=</span> <span class="nx">a</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">c</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ch1</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ch2</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ch3</span> <span class="o">:=</span> <span class="nx">ch1</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ch1</span> <span class="o">==</span> <span class="nx">ch2</span><span class="p">)</span> <span class="c1">// false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ch1</span> <span class="o">==</span> <span class="nx">ch3</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>引用类型变量存储的是某个变量的内存地址。所以引用类型变量的比较，判断的是这两个引用类型存储的是不是同一个变量。</p>
<ul>
<li>如果是同一个变量，则内存地址肯定也一样，则引用类型变量相等，用&quot;==&ldquo;判断为true</li>
<li>如果不是同一个变量，则内存地址肯定不一样，&quot;==&ldquo;结果为false‘</li>
</ul>
<h4 id="接口类型">接口类型</h4>
<p>Go 语言根据接口类型是否包含一组方法将接口类型分成了两类：</p>
<ul>
<li>使用 <code>runtime.iface</code>结构体表示包含方法的接口</li>
<li>使用 <code>runtime.eface</code>结构体表示不包含任何方法的 <code>interface{}</code> 类型</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="k">type</span> <span class="nc">eface</span><span class="w"> </span><span class="k">struct</span> <span class="p">{</span><span class="w"> </span><span class="c1">// 16 字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">_type</span><span class="w"> </span><span class="o">*</span><span class="n">_type</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">data</span><span class="w">  </span><span class="k">unsafe</span><span class="p">.</span><span class="n">Pointer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">type</span> <span class="nc">iface</span><span class="w"> </span><span class="k">struct</span> <span class="p">{</span><span class="w"> </span><span class="c1">// 16 字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">tab</span><span class="w">  </span><span class="o">*</span><span class="n">itab</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">data</span><span class="w"> </span><span class="k">unsafe</span><span class="p">.</span><span class="n">Pointer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>所以我们可以得知，一个接口值是由两个部分组成的，即该接口对应的类型和接口对应具体的值。接口值的比较涉及这两部分的比较，只有当类型和值都相等（动态值使用<code>==</code>比较），两个接口值才是相等的。看个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">c</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">d</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">c</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">d</span><span class="p">)</span> <span class="c1">// false
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>a</code>和<code>c</code>类型相同（都是<code>int</code>），值也相同（都是<code>0</code>，基本类型比较），故两者相等。 <code>a</code>和<code>b</code>类型相同，值不等，故两者不等。 <code>a</code>和<code>d</code>类型不同，<code>a</code>为<code>int</code>，<code>d</code>为<code>float64</code>，故两者不等。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="s">&#34;test&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="s">&#34;test&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">c</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="s">&#34;test&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">c</span><span class="p">)</span> <span class="c1">// false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">d</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="s">&#34;test&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">e</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">A</span> <span class="p">{</span> <span class="nx">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="s">&#34;test&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">d</span> <span class="o">==</span> <span class="nx">e</span><span class="p">)</span> <span class="c1">// false
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>a</code>和<code>b</code>类型相同（都是<code>A</code>），值也相同（结构体<code>A</code>），故两者相等。 <code>a</code>和<code>c</code>类型相同，值不同，故两者不等。 <code>d</code>和<code>e</code>类型相同（都是<code>*A</code>），值使用指针（引用）类型的比较，由于不是指向同一个地址，故不等。</p>
<p>不过需要注意的是，如果接口中类型是切片或者<code>Map</code>不可比较的类型，那么会直接报错的。看个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// panic: runtime error: comparing uncomparable type []int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>a</code>和<code>b</code>的类型是切片类型，而切片类型不可比较，所以<code>a == b</code>会<code>panic</code>。</p>
<p><strong>接口值的比较不要求接口类型（注意不是动态类型）完全相同，只要一个接口可以转化为另一个就可以比较</strong>。例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">f</span> <span class="o">*</span><span class="nx">os</span><span class="p">.</span><span class="nx">File</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span> <span class="p">=</span> <span class="nx">f</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">rc</span> <span class="nx">io</span><span class="p">.</span><span class="nx">ReadCloser</span> <span class="p">=</span> <span class="nx">f</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="nx">rc</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">w</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span> <span class="p">=</span> <span class="nx">f</span>
</span></span><span class="line"><span class="cl"><span class="c1">// invalid operation: r == w (mismatched types io.Reader and io.Writer)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="nx">w</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>r</code>的类型为<code>io.Reader</code>接口，<code>rc</code>的类型为<code>io.ReadCloser</code>接口。查看源码，<code>io.ReadCloser</code>的定义如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ReadCloser</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Reader</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Closer</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>io.ReadCloser</code>可转化为<code>io.Reader</code>，故两者可比较。</p>
<p>而<code>io.Writer</code>不可转化为<code>io.Reader</code>，编译报错。</p>
<h4 id="总结">总结</h4>
<ul>
<li>可比较：<code>int、ifloat、string、bool、complex、pointe、channel、interface、array</code></li>
<li>不可比较：<code>slice、map、function</code></li>
<li>复合类型中如果带有不可比较的类型，那么该类型也是不可比较的。可以理解不可比较类型具有传递性。</li>
</ul></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2023-05-22 17:47:44">更新于 2023-05-22&nbsp;</span>
      </div></div>
    <div class="post-info-line">
      <div class="post-info-md"></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://Lizhe1228.github.io/posts/go/day1-10/" data-title="Go Exercises(Day1-10)" data-hashtags="go,面试"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="http://Lizhe1228.github.io/posts/go/day1-10/" data-hashtag="go"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="http://Lizhe1228.github.io/posts/go/day1-10/" data-title="Go Exercises(Day1-10)" data-ralateuid="6314435573"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href='/tags/go/' class="post-tag">Go</a><a href='/tags/%E9%9D%A2%E8%AF%95/' class="post-tag">面试</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/docker/docker04/" class="post-nav-item" rel="prev" title="DockerFie"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>DockerFie</a>
      <a href="/posts/git/git/" class="post-nav-item" rel="next" title="Git的基本使用">Git的基本使用<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.111.3">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.18"><img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">
              <a href="/">Lizhe1228</a></span></div><div class="footer-line statistics"><span class="site-time" title='网站运行中……'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden="true"></i><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor">
          <span id="busuanzi_container_site_uv" title='总访客数'><i class="fa-regular fa-user fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span><span id="busuanzi_container_site_pv" class="footer-divider" title='总访问量'><i class="fa-regular fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span>
        </div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><a href="https://github.com/Lizhe1228" title="View source on GitHub"target="_blank" rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><div id="mask"></div><div class="reading-progress-bar" style="left: 0;top: 0;"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><link rel="stylesheet" href="/lib/pace/themes/black/pace-theme-minimal.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/lunr/lunr.min.js" defer></script><script src="/lib/lunr/lunr.stemmer.support.min.js" defer></script><script src="/lib/lunr/lunr.zh.min.js" defer></script><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/typeit/index.umd.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"autoBookmark":true,"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":20},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"data":{"typeit-header-desktop":"Lizhe1228's blog","typeit-header-title-mobile":"Lizhe1228's blog"},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":30,"type":"lunr"},"siteTime":"2023-05-21","typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"typeit-header-desktop":["typeit-header-desktop"],"typeit-header-title-mobile":["typeit-header-title-mobile"]},"duration":-1,"loop":false,"speed":100}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
